--------------------------------------------------------
--  DDL for Table FIGHTERS
--------------------------------------------------------

  CREATE TABLE "WARMINSKIP"."FIGHTERS" 
   (	"FIGHTER_ID" NUMBER(19,0), 
	"NAME" CLOB, 
	"HEIGHT" CLOB, 
	"REACH" CLOB, 
	"STANCE" CLOB, 
	"DOB" CLOB, 
	"SLpM" CLOB, 
	"Str.Acc." CLOB, 
	"SApM" CLOB, 
	"Str.Def" CLOB, 
	"TD Avg" CLOB, 
	"TD Acc" CLOB, 
	"TD Def" CLOB, 
	"Sub. Avg" CLOB, 
	"DELETED_AT" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" 
 LOB ("NAME") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("HEIGHT") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("REACH") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("STANCE") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("DOB") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("SLpM") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("Str.Acc.") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("SApM") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("Str.Def") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("TD Avg") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("TD Acc") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("TD Def") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("Sub. Avg") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) ;
--------------------------------------------------------
--  DDL for Index ix_FIGHTERS_fighter_id
--------------------------------------------------------

  CREATE INDEX "WARMINSKIP"."ix_FIGHTERS_fighter_id" ON "WARMINSKIP"."FIGHTERS" ("FIGHTER_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Trigger LOG_TRIGGER_FIGHTERS
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "WARMINSKIP"."LOG_TRIGGER_FIGHTERS" 
  AFTER INSERT OR UPDATE
  ON FIGHTERS
  FOR EACH ROW
DECLARE
  log_action  PROJECT_LOGS.action%TYPE;
  log_record  PROJECT_LOGS.record_id%TYPE;
BEGIN
  IF INSERTING THEN
    log_action := 'Insert';
    log_record := :new.fighter_id;
  ELSIF UPDATING THEN
    IF :old.DELETED_AT IS NULL AND :new.DELETED_AT IS NOT NULL THEN
      log_action := 'Deleted';
    ELSE 
      log_action := 'Update';
    END IF;
    
    log_record := :old.fighter_id;
  ELSE
    DBMS_OUTPUT.PUT_LINE('This code is not reachable.');
  END IF;

  INSERT INTO PROJECT_LOGS (ACTION, RESULT_TABLE, CREATED_AT, RECORD_ID)
    VALUES (log_action, 'FIGHTERS', SYSDATE, log_record);
END;
/
ALTER TRIGGER "WARMINSKIP"."LOG_TRIGGER_FIGHTERS" ENABLE;
--------------------------------------------------------
--  Constraints for Table FIGHTERS
--------------------------------------------------------

  ALTER TABLE "WARMINSKIP"."FIGHTERS" ADD CONSTRAINT "FIGHTER_ID" PRIMARY KEY ("FIGHTER_ID")
  USING INDEX (CREATE INDEX "WARMINSKIP"."ix_FIGHTERS_fighter_id" ON "WARMINSKIP"."FIGHTERS" ("FIGHTER_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" )  ENABLE;

--------------------------------------------------------
--  DDL for Table FIGHTS
--------------------------------------------------------

  CREATE TABLE "WARMINSKIP"."FIGHTS" 
   (	"FIGHT_ID" NUMBER(19,0), 
	"date" CLOB, 
	"WINNER_ID" NUMBER(19,0), 
	"LOSER_ID" NUMBER(19,0), 
	"DIVISION" CLOB, 
	"METHOD" CLOB, 
	"ROUND" CLOB, 
	"TIME" CLOB, 
	"WINNER_STATS_ID" NUMBER(19,0), 
	"LOSER_STATS_ID" NUMBER(19,0), 
	"DELETED_AT" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" 
 LOB ("date") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("DIVISION") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("METHOD") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("ROUND") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("TIME") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) ;
--------------------------------------------------------
--  DDL for Index ix_FIGHTS_fight_id
--------------------------------------------------------

  CREATE INDEX "WARMINSKIP"."ix_FIGHTS_fight_id" ON "WARMINSKIP"."FIGHTS" ("FIGHT_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Trigger LOG_TRIGGER_FIGHTS
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "WARMINSKIP"."LOG_TRIGGER_FIGHTS" 
  AFTER INSERT OR UPDATE
  ON FIGHTS
  FOR EACH ROW
DECLARE
  log_action  PROJECT_LOGS.action%TYPE;
  log_record  PROJECT_LOGS.record_id%TYPE;
BEGIN
  IF INSERTING THEN
    log_action := 'Insert';
    log_record := :new.fight_id;
  ELSIF UPDATING THEN
    IF :old.DELETED_AT IS NULL AND :new.DELETED_AT IS NOT NULL THEN
      log_action := 'Deleted';
    ELSE 
      log_action := 'Update';
    END IF;
    
    log_record := :old.fight_id;
  ELSE
    DBMS_OUTPUT.PUT_LINE('This code is not reachable.');
  END IF;

  INSERT INTO PROJECT_LOGS (ACTION, RESULT_TABLE, CREATED_AT, RECORD_ID)
    VALUES (log_action, 'FIGHTS', SYSDATE, log_record);
END;
/
ALTER TRIGGER "WARMINSKIP"."LOG_TRIGGER_FIGHTS" ENABLE;
--------------------------------------------------------
--  Constraints for Table FIGHTS
--------------------------------------------------------

  ALTER TABLE "WARMINSKIP"."FIGHTS" ADD CONSTRAINT "FIGHT_ID" PRIMARY KEY ("FIGHT_ID")
  USING INDEX (CREATE INDEX "WARMINSKIP"."ix_FIGHTS_fight_id" ON "WARMINSKIP"."FIGHTS" ("FIGHT_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" )  ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table FIGHTS
--------------------------------------------------------

  ALTER TABLE "WARMINSKIP"."FIGHTS" ADD CONSTRAINT "WINNER_ID" FOREIGN KEY ("WINNER_ID")
	  REFERENCES "WARMINSKIP"."FIGHTERS" ("FIGHTER_ID") ENABLE;
  ALTER TABLE "WARMINSKIP"."FIGHTS" ADD CONSTRAINT "LOSER_ID" FOREIGN KEY ("LOSER_ID")
	  REFERENCES "WARMINSKIP"."FIGHTERS" ("FIGHTER_ID") ENABLE;
  ALTER TABLE "WARMINSKIP"."FIGHTS" ADD CONSTRAINT "WINNER_STATS_ID" FOREIGN KEY ("WINNER_STATS_ID")
	  REFERENCES "WARMINSKIP"."STATS" ("STATS_ID") ENABLE;
  ALTER TABLE "WARMINSKIP"."FIGHTS" ADD CONSTRAINT "LOSER_STATS_ID" FOREIGN KEY ("LOSER_STATS_ID")
	  REFERENCES "WARMINSKIP"."STATS" ("STATS_ID") ENABLE;
    
 
--------------------------------------------------------
--  DDL for Table STATS
--------------------------------------------------------

  CREATE TABLE "WARMINSKIP"."STATS" 
   (	"STATS_ID" NUMBER(19,0), 
	"KNOCKDOWNS" CLOB, 
	"SUB_ATTEMPTS" CLOB, 
	"PASS" CLOB, 
	"REVERSALS" CLOB, 
	"TAKEDOWNS_LANDED" NUMBER(*,0), 
	"TAKEDOWNS_ATTEMPTS" NUMBER(*,0), 
	"SIG_STRIKES_LANDED" NUMBER(*,0), 
	"SIG_STRIKES_ATTEMPTS" NUMBER(*,0), 
	"TOTAL_STRIKES_LANDED" NUMBER(*,0), 
	"TOTAL_STRIKES_ATTEMPTS" NUMBER(*,0), 
	"HEAD_STRIKES_LANDED" NUMBER(*,0), 
	"HEAD_STRIKES_ATTEMPTS" NUMBER(*,0), 
	"BODY_STRIKES_LANDED" NUMBER(*,0), 
	"BODY_STRIKES_ATTEMPTS" NUMBER(*,0), 
	"LEG_STRIKES_LANDED" NUMBER(*,0), 
	"LEG_STRIKES_ATTEMPTS" NUMBER(*,0), 
	"DISTANCE_STRIKES_LANDED" NUMBER(*,0), 
	"DISTANCE_STRIKES_ATTEMPTS" NUMBER(*,0), 
	"CLINCH_STRIKES_LANDED" NUMBER(*,0), 
	"CLINCH_STRIKES_ATTEMPTS" NUMBER(*,0), 
	"GROUND_STRIKES_LANDED" NUMBER(*,0), 
	"GROUND_STRIKES_ATTEMPTS" NUMBER(*,0), 
	"DELETED_AT" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" 
 LOB ("KNOCKDOWNS") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("SUB_ATTEMPTS") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("PASS") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("REVERSALS") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) ;
--------------------------------------------------------
--  DDL for Index ix_STATS_stats_id
--------------------------------------------------------

  CREATE INDEX "WARMINSKIP"."ix_STATS_stats_id" ON "WARMINSKIP"."STATS" ("STATS_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Trigger LOG_TRIGGER_STATS
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "WARMINSKIP"."LOG_TRIGGER_STATS" 
  AFTER INSERT OR UPDATE
  ON STATS
  FOR EACH ROW
DECLARE
  log_action  PROJECT_LOGS.action%TYPE;
  log_record  PROJECT_LOGS.record_id%TYPE;
BEGIN
  IF INSERTING THEN
    log_action := 'Insert';
    log_record := :new.stats_id;
  ELSIF UPDATING THEN
    IF :old.DELETED_AT IS NULL AND :new.DELETED_AT IS NOT NULL THEN
      log_action := 'Deleted';
    ELSE 
      log_action := 'Update';
    END IF;
    
    log_record := :old.stats_id;
  ELSE
    DBMS_OUTPUT.PUT_LINE('This code is not reachable.');
  END IF;

  INSERT INTO PROJECT_LOGS (ACTION, RESULT_TABLE, CREATED_AT, RECORD_ID)
    VALUES (log_action, 'STATS', SYSDATE, log_record);
END;
/
ALTER TRIGGER "WARMINSKIP"."LOG_TRIGGER_STATS" ENABLE;
--------------------------------------------------------
--  Constraints for Table STATS
--------------------------------------------------------

  ALTER TABLE "WARMINSKIP"."STATS" ADD CONSTRAINT "STATS_ID" PRIMARY KEY ("STATS_ID")
  USING INDEX (CREATE INDEX "WARMINSKIP"."ix_STATS_stats_id" ON "WARMINSKIP"."STATS" ("STATS_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" )  ENABLE;




--------------------------------------------------------
--  DDL for Table PROJECT_LOGS
--------------------------------------------------------

  CREATE TABLE "WARMINSKIP"."PROJECT_LOGS" 
   (	"ACTION" VARCHAR2(50 BYTE), 
	"RESULT_TABLE" VARCHAR2(50 BYTE), 
	"CREATED_AT" TIMESTAMP (6), 
	"RECORD_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  Constraints for Table PROJECT_LOGS
--------------------------------------------------------

  ALTER TABLE "WARMINSKIP"."PROJECT_LOGS" MODIFY ("RESULT_TABLE" NOT NULL ENABLE);
  ALTER TABLE "WARMINSKIP"."PROJECT_LOGS" MODIFY ("CREATED_AT" NOT NULL ENABLE);
  ALTER TABLE "WARMINSKIP"."PROJECT_LOGS" MODIFY ("ACTION" NOT NULL ENABLE);



--------------------------------------------------------
--  DDL for Table PROJECT_RAPORTS
--------------------------------------------------------

  CREATE TABLE "WARMINSKIP"."PROJECT_RAPORTS" 
   (	"FIGHTS" NUMBER, 
	"AVG_ROUNDS" NUMBER, 
	"DATA_DATE" VARCHAR2(30 BYTE), 
	"RAPORT_DATE" TIMESTAMP (6), 
	"TYPE" VARCHAR2(20 BYTE), 
	"YEAR" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
